<!doctype html>
<html lang=ja>
<head>
<meta charset=utf-8>
<style>
.all { width: 100%; margin-top:0px; font-size:1.3em; }
#o {font-size:5.2em; }
#c {font-size:2.6em; margin-top:20px; }
p {font-size:1.9em; margin-top:0px; }
#t {font-size:1.3em; margin-top:0px; }
</style>
</head>
<body>
<p style="color:green" onclick=secret_q()>Ver.1.0.43</p>
<p id=t></p>
<textarea class=all id=q rows=10 value=ここに文字数を調べたい文字を入力></textarea>
<br>
<input class=all id=o disabled>
<input class=all id=c disabled>
<script>
tex_q=document.getElementById("q")
inp_o=document.getElementById("o")
inp_c=document.getElementById("c")
p_t=document.getElementById("t")
inp_o_value=""
isall={"stop":true,"dev":false}
secret_i=0
function secret_q(id=0){
    if(id==1){alert("設定が終了しました。")}
    secret_i++
    if(secret_i<10){return;}
    secret_i=0
    secret_q_answer=Number(prompt("設定IDを入力してください。"))
    if (secret_q_answer==1){keiryo();secret_q(1);f_script(0);return;}
    if (secret_q_answer==2){dev_mode();secret_q(1);f_script(0);return;}
    alert("入力形式が不正です")
}
function dev_mode(){
    isall["dev"]=confirm("開発者プログラム、デバッグモードを\n利用しますか?\n利用するとデバッグが出てくるかもです\n起動したからといって\n処理に影響があるわけではありません。")
    if(isall["dev"]){
        alert("デバッグモードを起動します")
        inp_c.style.display="block"
    }else{
        inp_c.style.display="none"
    }
}
function keiryo(){
    isall["stop"]=confirm("軽量化プログラムを起動しますか?\nこの質問はページをリロードしてから１回だけで、\n起動するとPCの処理が軽くなります。\nけれども、文字数演算に少し時間がかかるようになります。\n大体30万行を0.6秒程度(バージョンによって変動。v1.0.0の場合)")
    if(isall["stop"]){
        p_t.innerHTML="軽量化 : 有効"
        p_t.style.color="gold"
    }else{
        p_t.innerHTML="軽量化 : 無効"
        p_t.style.color="gray"
    }
    times=[20,40,60,80,100,120,140,160,180,200,220,240,260,280,300,320,340,360,380,400,420,440,460,480,500,520,540,560,580,600,620,640,660,680,700,720,740,760,780,800,820,840,860,880,900,920,940,960,980,1000,1020,1040,1060,1080,1100,1120,1140,1160,1180,1200,1220,1240,1260,1280,1300,1320,1340,1360,1380,1400,1420,1440,1460,1480,1500,1520,1540,1560,1580,1600,1620,1640,1660,1680,1700,1720,1740,1760,1780,1800,1820,1840,1860,1880,1900,1920,1940,1960,1980,2000]
}
keiryo()
dev_mode()
tex_q.addEventListener('input', ()=> {f_script()})
function f_script(f_color=1){
    level=Math.floor(inp_o_value/(500000/times.length))
    if(level>=times.length){level=times.length-1}
    if(tex_q.value==="./command\n\\settings\nkeiryo\n" || tex_q.value==="./command\n\\settings\nid-001\n"){keiryo()}
    if(tex_q.value==="./command\n\\settings\ndeveloper\n" || tex_q.value==="./command\n\\settings\nid-002\n"){dev_mode()}
    console.log(`level:${level}, stoptime:${times[level]}, stop:${isall["stop"]}, developer:${isall["dev"]}`)
    setTimeout(()=>{
        inp_o_value=tex_q.value.length
        if(isall["dev"]){
            inp_o.value=`length : ${inp_o_value}`
        }else{
            inp_o.value=inp_o_value
        }
    },times[level]*isall["stop"])
    if(f_color==1){
        inp_o_color=[]
        for (let i=0;i<3;i++){
            inp_o_color[i]=Math.floor(Math.random()*256)
        }
        inp_o.style.color=`rgb(${inp_o_color[0]}, ${inp_o_color[1]}, ${inp_o_color[2]})`
        inp_c.value=`rgb-colorcode : ${inp_o.style.color}`
        inp_c.style.color=inp_o.style.color
    }
}
</script>
</body>
</html>
